{"version":3,"sources":["styles/Home.module.css","styles/NewPage.module.css","components/Header.js","utils/dateParser.js","utils/categoryData.js","utils/dateSubtract.js","contexts/NewItemContext.js","components/ItemTag.js","utils/data.js","components/Toolbar.js","utils/dateCompare.js","pages/Home.js","pages/Account.js","utils/dateAdd.js","pages/NewItem.js","App.js","index.js"],"names":["module","exports","Header","category","className","css","header","style","color","textColor","backgroundColor","name","dateParser","date","month","getMonth","day","getDate","year","getFullYear","length","join","categories","id","day2ms","strDateSubtract","strDate1","strDate2","Math","floor","abs","Date","getTime","NewItemContext","createContext","NewItemContextProvider","props","useState","setName","setCategory","comment","setComment","expireDate","setExpireDate","expireInDays","setExpireInDays","setNewItem","_name","_category","_expireDate","_comment","Provider","value","resetNewItem","children","DialogContext","DeleteDialog","useContext","open","setOpen","deleteItem","handleClose","Dialog","onClose","DialogTitle","DialogContent","DialogActions","onClick","dialogCancelBtn","dialogConfirmBtn","ItemTag","clockColor","item","history","useHistory","ItemContext","focus","setFocus","find","diff","borderColor","console","log","itemTag","itemTagName","itemTagTime","itemTagComment","itemTagMore","push","marginLeft","data","Toolbar","ToolbarContext","search","setSearch","sort","setSort","toolbar","placeholder","onChange","e","target","toolbarToggle","type","toolbarCheckbox","htmlFor","display","alignItems","fontSize","position","right","marginRight","strDateCompare","Home","filter","includes","pinyin","removeTone","removeSpace","item1","item2","map","Account","min2ms","timeZoneOffset","getTimezoneOffset","NewPage","toggleTime","setToggleTime","cssHome","headerBackBtn","goBack","form","formInput","justifyContent","toggleDiv","textAlign","strDate","days","rows","formSubmit","Button","variant","App","basename","process","path","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f7cab9e0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemTag\":\"Home_itemTag__2tM5m\",\"itemTagTime\":\"Home_itemTagTime__3MI3S\",\"itemTagComment\":\"Home_itemTagComment__1haJH\",\"itemTagMore\":\"Home_itemTagMore__ovSbv\",\"toolbar\":\"Home_toolbar__3AGqh\",\"toolbarToggle\":\"Home_toolbarToggle__2oSg7\",\"toolbarCheckbox\":\"Home_toolbarCheckbox__3HxwP\",\"header\":\"Home_header__31p1I\",\"dialogCancelBtn\":\"Home_dialogCancelBtn__2OS-A\",\"dialogConfirmBtn\":\"Home_dialogConfirmBtn__3bM_B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerBackBtn\":\"NewPage_headerBackBtn__1Gbkn\",\"form\":\"NewPage_form__1OlwF\",\"toggleDiv\":\"NewPage_toggleDiv__2rY4A\",\"formSubmit\":\"NewPage_formSubmit__14eAv\",\"name\":\"NewPage_name__3yGes\",\"category\":\"NewPage_category__3YlE6\",\"expireInDays\":\"NewPage_expireInDays__32Y4v\",\"expireDate\":\"NewPage_expireDate__2knjQ\",\"comment\":\"NewPage_comment__37k5I\"};","import css from \"../styles/Home.module.css\";\r\n\r\nfunction Header ({category}) {\r\n\r\n  return (\r\n    <div className={css.header} style={{\r\n      color: category.textColor,\r\n      backgroundColor: category.color\r\n    }}>\r\n      {category.name}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;","// parse date object to yyyy-mm-dd\r\n// @param Date: date\r\nfunction dateParser(date) {\r\n  \r\n  let month = \"\" + (date.getMonth() + 1);\r\n  let day = \"\" + date.getDate();\r\n  const year = \"\" + date.getFullYear();\r\n\r\n  if (month.length < 2)\r\n    month = \"0\" + month;\r\n  if (day.length < 2)\r\n    day = \"0\" + day;\r\n\r\n  return [year, month, day].join(\"-\");\r\n}\r\n\r\nexport default dateParser;","export const categories = [\r\n  {\r\n    name: \"水果\",\r\n    id: \"fruits\",  // used for database\r\n    color: \"#42a5f5\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"蔬菜\",\r\n    id: \"vegetables\",\r\n    color: \"#8bc34a\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"肉类\",\r\n    id: \"meat\",\r\n    color: \"#FF5722\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"干货\",\r\n    id: \"dry-foods\",\r\n    color: \"#FEA82F\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"其他\",\r\n    id: \"others\",\r\n    color: \"#cfd8dc\",\r\n    textColor: \"#757575\",\r\n  },\r\n];","// subtract 2 dates and return day difference\r\n\r\nconst day2ms = 8.64*10**7;\r\n\r\nfunction dateSubtract(date1, date2) {\r\n\r\n}\r\n\r\nfunction strDateSubtract(strDate1, strDate2) {\r\n  return Math.floor(Math.abs((\r\n    new Date(strDate1).getTime()\r\n    - new Date(strDate2).getTime()\r\n  ) / day2ms));\r\n}\r\n\r\nexport { dateSubtract, strDateSubtract };","import { createContext, useState } from \"react\";\r\nimport dateParser from \"../utils/dateParser\";\r\nimport { strDateSubtract } from \"../utils/dateSubtract\";\r\n\r\nexport const NewItemContext = createContext();\r\n\r\nfunction NewItemContextProvider(props) {\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [comment, setComment] = useState(\"\");\r\n  const [expireDate, setExpireDate] = useState(dateParser(new Date()));\r\n  const [expireInDays, setExpireInDays] = useState(0);\r\n\r\n  const setNewItem = (_name, _category, _expireDate, _comment) => {\r\n    setName(_name); setCategory(_category); setComment(_comment);\r\n    setExpireDate(_expireDate); \r\n    setExpireInDays( strDateSubtract(dateParser(new Date()), _expireDate) );\r\n  }\r\n\r\n  const resetNewItem = () => {\r\n    setNewItem(\"\", \"\", dateParser(new Date()), \"\");\r\n  };\r\n\r\n  return (\r\n    <NewItemContext.Provider value={{\r\n      name, setName, \r\n      category, setCategory, \r\n      comment, setComment,\r\n      expireDate, setExpireDate, \r\n      expireInDays, setExpireInDays,\r\n      setNewItem, resetNewItem,\r\n    }}>\r\n      {props.children}\r\n    </NewItemContext.Provider>\r\n  );\r\n}\r\n\r\nexport default NewItemContextProvider;","import PropTypes from 'prop-types';\r\nimport { createContext, useContext, useState } from 'react';\r\nimport { ItemContext } from '../pages/Home.js';\r\nimport css from '../styles/Home.module.css';\r\nimport dateParser from '../utils/dateParser.js';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\nimport { categories } from \"../utils/categoryData\";\r\nimport { strDateSubtract } from \"../utils/dateSubtract\";\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { NewItemContext } from '../contexts/NewItemContext.js';\r\n\r\nconst DialogContext = createContext();\r\n\r\nfunction ItemTag({ item }) {\r\n\r\n  const history = useHistory();\r\n\r\n  // context\r\n  const { focus, setFocus } = useContext(ItemContext);\r\n  const handleClick = () => setFocus(item.id);\r\n\r\n  // edit item\r\n  const { setNewItem } = useContext(NewItemContext);\r\n\r\n  // delete dialog\r\n  const [open, setOpen] = useState(false);\r\n  const deleteItem = () => {\r\n    console.log(\"deleted\");\r\n    setOpen(false);\r\n  };\r\n\r\n  // attr\r\n  const category = categories.find(category => category.id === item.category);\r\n  const diff = strDateSubtract(dateParser(new Date()), item.expireDate);\r\n\r\n  let clockColor;\r\n  if (diff <= 3) {\r\n    clockColor = \"#c23b0a\"; // red\r\n  } else if (diff <= 7) {\r\n    clockColor = \"#cf9911\"; // orange\r\n  } else {\r\n    clockColor = \"#2b9611\"; // green\r\n  }\r\n\r\n  const borderColor = category.color;\r\n\r\n  // module\r\n  return (\r\n    <DialogContext.Provider value={{ open, setOpen, deleteItem }} >\r\n      <div className={css.itemTag} onClick={handleClick} style={{\r\n        borderColor: borderColor\r\n      }} >\r\n        <div className={css.itemTagName}>\r\n          {item.name}\r\n        </div>\r\n        <div className={css.itemTagTime}>\r\n          <ScheduleIcon style={{\r\n            color: clockColor,\r\n          }} />\r\n          {diff <= 7 ?\r\n            `${strDateSubtract(dateParser(new Date()), item.expireDate)} 天后过期` :\r\n            `${item.expireDate} 过期`\r\n          }\r\n        </div>\r\n        {item.id === focus && item.comment && item.comment !== \"\" &&\r\n          <div className={css.itemTagComment}> {item.comment} </div>\r\n        }\r\n        {item.id === focus &&\r\n          <div className={css.itemTagMore}>\r\n            <InfoOutlinedIcon style={{ color: \"#43a047\" }}\r\n              onClick={() => {\r\n                setNewItem(item.name, item.category, item.expireDate, item.comment);\r\n                history.push('./new-item');\r\n              }} />\r\n            <CancelIcon color=\"secondary\" style={{ marginLeft: \"5px\" }}\r\n              onClick={() => { setOpen(true) }} />\r\n          </div>\r\n        }\r\n        <DeleteDialog />\r\n      </div>\r\n    </DialogContext.Provider>\r\n  );\r\n}\r\n\r\nfunction DeleteDialog() {\r\n  const { open, setOpen, deleteItem } = useContext(DialogContext);\r\n  const handleClose = () => { setOpen(false) };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose} >\r\n      <DialogTitle>确认删除？</DialogTitle>\r\n      <DialogContent>是否要删除这项物品？一旦确认，该物品将被永久删除。</DialogContent>\r\n      <DialogActions>\r\n        <div onClick={handleClose} className={css.dialogCancelBtn} >取消</div>\r\n        <div onClick={deleteItem} className={css.dialogConfirmBtn} >确认</div>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nItemTag.propTypes = {\r\n  item: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n    category: PropTypes.string,\r\n    expireDate: PropTypes.string,\r\n    comment: PropTypes.string\r\n  })\r\n};\r\n\r\nexport default ItemTag;","\r\nexport const data = [\r\n  {\r\n    id: \"item-001\",\r\n    name: \"猪肉\",\r\n    category: \"meat\",\r\n    expireDate: \"2021-08-19\",\r\n    comment: \"冰箱冷冻室\",\r\n  },\r\n  {\r\n    id: \"item-002\",\r\n    name: \"鸡翅\",\r\n    category: \"meat\",\r\n    expireDate: \"2021-08-06\",\r\n    comment: \"今早吃掉\",\r\n  },\r\n  {\r\n    id: \"item-003\",\r\n    name: \"西兰花\",\r\n    category: \"vegetables\",\r\n    expireDate: \"2021-08-10\",\r\n    comment: \"冷藏第三层\",\r\n  }\r\n];","import css from \"../styles/Home.module.css\";\r\nimport CachedOutlinedIcon from '@material-ui/icons/CachedOutlined';\r\nimport AddBoxOutlinedIcon from '@material-ui/icons/AddBoxOutlined';\r\nimport { useContext } from \"react\";\r\nimport { ToolbarContext } from \"../pages/Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nfunction Toolbar() {\r\n\r\n  // context\r\n  const history = useHistory();\r\n  const { search, setSearch, sort, setSort } = useContext(ToolbarContext);\r\n\r\n  // events\r\n  const handleSearchChange = (e) => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className={css.toolbar}>\r\n      <input placeholder={\"搜索\"} value={search} onChange={handleSearchChange} />\r\n\r\n      <div className={css.toolbarToggle}>\r\n        <input type=\"checkbox\" id={css.toolbarCheckbox} value={sort} onChange={() => { setSort(!sort) }} />\r\n        <label htmlFor={css.toolbarCheckbox} >紧凑模式</label>\r\n      </div>\r\n\r\n      <div onClick={() => { history.push('./new-item') }} style={{\r\n        display: \"flex\", alignItems: \"center\", fontSize: \"0.9em\", position: \"absolute\", right: \"12px\"\r\n      }}>\r\n        <AddBoxOutlinedIcon style={{ marginRight: \"3px\" }} /> 添加项目\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toolbar;","// return -1 if d1 < d2; 0 if d1 = d2; 1 if d1 > d2\r\n\r\nfunction strDateCompare(strDate1, strDate2) {\r\n  const diff = new Date(strDate1).getTime() - new Date(strDate2).getTime();\r\n  if (diff < 0) {\r\n    return -1;\r\n  } else if (diff > 0) {\r\n    return 1;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport { strDateCompare };","import { createContext, useState } from \"react\";\r\nimport Header from \"../components/Header\";\r\nimport ItemTag from \"../components/ItemTag\";\r\nimport pinyin from \"chinese-to-pinyin\";\r\nimport { data } from \"../utils/data\";\r\nimport { categories } from \"../utils/categoryData\";\r\nimport Toolbar from \"../components/Toolbar\";\r\nimport { strDateCompare } from \"../utils/dateCompare\";\r\n\r\nexport const ToolbarContext = createContext();\r\nexport const ItemContext = createContext();\r\n\r\nfunction Home() {\r\n\r\n  // item context\r\n  const [focus, setFocus] = useState(\"\");\r\n\r\n  // toolbar context\r\n  const [search, setSearch] = useState(\"\");\r\n  const [sort, setSort] = useState(false); // true: sort by time; false: sort by category\r\n\r\n  // clear focus upon state change\r\n\r\n  // module\r\n  return (\r\n    <ToolbarContext.Provider value={{\r\n      search, setSearch,\r\n      sort, setSort,\r\n    }}>\r\n      <ItemContext.Provider value={{\r\n        focus, setFocus,\r\n      }}>\r\n        <Toolbar />\r\n\r\n        {sort ?\r\n          <div>\r\n            {\r\n              data.filter(item => item.name.includes(search)\r\n                || pinyin(item.name, { removeTone: true, removeSpace: false }).includes(search))\r\n                .sort((item1, item2) => strDateCompare(item1.expireDate, item2.expireDate))\r\n                .map(item => <ItemTag item={item} key={item.id} />)\r\n            }\r\n          </div> :\r\n          <div>\r\n            {\r\n              categories.map(category => (\r\n                <div>\r\n                  <Header category={category} key={category.id} />\r\n                  {\r\n                    data.filter(item => item.category===category.id)\r\n                      .filter(item => item.name.includes(search)\r\n                      || pinyin(item.name, { removeTone: true, removeSpace: false }).includes(search))\r\n                      .sort((item1, item2) => strDateCompare(item1.expireDate, item2.expireDate))\r\n                      .map(item => <ItemTag item={item} key={item.id} />)\r\n                  }\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        }\r\n      </ItemContext.Provider>\r\n    </ToolbarContext.Provider>\r\n  );\r\n}\r\n\r\n\r\nexport default Home;","\r\n\r\nfunction Account () {\r\n\r\n  return (\r\n    <div>\r\n      Account\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Account;","// add n days to a certain date\r\n\r\nimport dateParser from \"./dateParser\";\r\n\r\nconst day2ms = 8.64*10**7;\r\nconst min2ms = 6*10**4;\r\nconst timeZoneOffset = new Date().getTimezoneOffset(); \r\n\r\n// @param date: Date() object\r\n// return: Date() object\r\nfunction dateAdd(date, days) {\r\n\r\n}\r\n\r\n// @param strDate: string \"yyyy-mm-dd\"\r\n// return: string \"yyyy-mm-dd\"\r\nfunction strDateAdd(strDate, days) {\r\n  return dateParser(\r\n    new Date(\r\n      new Date(strDate).getTime() // initial date\r\n      + days * day2ms             // day gap\r\n      + timeZoneOffset * min2ms   // time zone correction\r\n    )\r\n  );\r\n}\r\n\r\nexport { dateAdd, strDateAdd }","import { categories } from \"../utils/categoryData\";\r\nimport cssHome from \"../styles/Home.module.css\";\r\nimport css from \"../styles/NewPage.module.css\"\r\nimport ArrowBackOutlinedIcon from '@material-ui/icons/ArrowBackOutlined';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { useContext, useState } from \"react\";\r\nimport dateParser from \"../utils/dateParser\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { strDateAdd } from \"../utils/dateAdd\";\r\nimport { strDateSubtract } from \"../utils/dateSubtract\";\r\nimport { NewItemContext } from \"../contexts/NewItemContext\";\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\n\r\nfunction NewPage() {\r\n\r\n  const history = useHistory();\r\n\r\n  // form context\r\n  const {\r\n    name, setName, category, setCategory, comment, setComment,\r\n    expireDate, setExpireDate, expireInDays, setExpireInDays,\r\n    resetNewItem,\r\n  } = useContext(NewItemContext);\r\n\r\n  const [toggleTime, setToggleTime] = useState(false); // true: time picker; false: xxx days from now\r\n\r\n  // submission\r\n  const handleSubmit = () => {\r\n    console.log(\r\n      name, category, expireDate, comment,\r\n    );\r\n  };\r\n\r\n  // DOM\r\n  return (\r\n    <div>\r\n      <div className={cssHome.toolbar}>\r\n        <div className={css.headerBackBtn} onClick={() => { history.goBack() }} >\r\n          <ArrowBackOutlinedIcon /> 返回\r\n        </div>\r\n      </div>\r\n\r\n      <form className={css.form}>\r\n        <div>\r\n          <label htmlFor={css.name}>名称</label> <br />\r\n          <input id={css.name} className={css.formInput}\r\n            value={name} onChange={(e) => { setName(e.target.value) }}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor={css.category} >分类</label> <br />\r\n          <select id={css.category}\r\n            value={category} onChange={(e) => { setCategory(e.target.value) }}\r\n          >\r\n            <option value=\"\">----- 请选择分类 -----</option>\r\n            {categories.map(category =>\r\n              <option value={category.id} key={category.id}>\r\n                {category.name}\r\n              </option>\r\n            )}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <label>保质期</label>\r\n            <div id={css.toggleDiv}>\r\n              <input id=\"toggle\" type=\"checkbox\"\r\n                value={toggleTime} onChange={() => { setToggleTime(!toggleTime) }}\r\n              />\r\n              <label htmlFor=\"toggle\" >选取日期</label>\r\n            </div>\r\n          </div>\r\n          {toggleTime ?\r\n            <input id={css.expireDate} type=\"date\" value={expireDate}\r\n              onChange={(e) => {\r\n                setExpireDate(e.target.value);\r\n                setExpireInDays(strDateSubtract(\r\n                  dateParser(new Date()), e.target.value\r\n                ))\r\n              }}\r\n            /> :\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <input id={css.expireInDays} type=\"number\"\r\n                value={expireInDays} onChange={(e) => {\r\n                  setExpireInDays(e.target.value);\r\n                  setExpireDate(strDateAdd(\r\n                    dateParser(new Date()), e.target.value\r\n                  ))\r\n                }}\r\n              />\r\n              <label htmlFor={css.expireInDays}> 天后过期</label>\r\n            </div>\r\n          }\r\n        </div>\r\n\r\n        {/* <div> For test purpose:\r\n          {strDateAdd(\"2021-08-04\", 2)} <br/>\r\n          {strDateSubtract(dateParser(new Date()), \"2021-08-06\")}\r\n        </div> */}\r\n\r\n        <div>\r\n          <label htmlFor={css.comment} >备注</label> <br />\r\n          <textarea id={css.comment} rows={3}\r\n            value={comment} onChange={(e) => { setComment(e.target.value) }}\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div className={css.formSubmit}>\r\n          <Button style={{ fontSize: \"1rem\", color: \"red\" }}\r\n            onClick={ resetNewItem }\r\n          ><DeleteForeverIcon />清除</Button>\r\n          <Button variant=\"contained\" style={{\r\n            fontSize: \"1rem\",\r\n            color: \"#F0F0F0\", backgroundColor: \"#B05B3B\",\r\n          }}\r\n            onClick={handleSubmit}\r\n          ><SaveIcon style={{marginRight: \"0.15em\"}} />保存</Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewPage;","import { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\n// pages\nimport Home from './pages/Home';\nimport Account from './pages/Account';\nimport NewPage from './pages/NewItem';\nimport NewItemContextProvider from './contexts/NewItemContext';\n\nfunction App() {\n\n  return (\n    <NewItemContextProvider>\n      <Router basename={process.env.PUBLIC_URL}>\n        <Switch>\n          <Route path='/home'>\n            <Home />\n          </Route>\n\n          <Route path='/new-item'>\n            <NewPage />\n          </Route>\n\n          <Route path='/account'>\n            <Account />\n          </Route>\n\n          <Route path='/'>\n            <Redirect to='/home' />\n            <div>\n              Empty Page\n            </div>\n          </Route>\n        </Switch>\n      </Router>\n    </NewItemContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}