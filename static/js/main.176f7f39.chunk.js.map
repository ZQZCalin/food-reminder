{"version":3,"sources":["components/Header.js","utils/dateParser.js","utils/categoryData.js","utils/dateSubtract.js","contexts/NewItemContext.js","utils/dateCompare.js","contexts/AuthContext.js","utils/data.js","components/ItemTag.js","components/Toolbar.js","components/Waiting.js","pages/Home.js","pages/Account.js","utils/dateAdd.js","pages/NewItem.js","pages/Login.js","App.js","index.js","styles/Home.module.css","styles/NewPage.module.css","styles/Login.module.css"],"names":["Header","category","className","css","header","style","color","textColor","backgroundColor","name","dateParser","date","month","getMonth","day","getDate","year","getFullYear","length","join","categories","id","day2ms","strDateSubtract","strDate1","strDate2","Math","floor","Date","getTime","NewItemContext","createContext","NewItemContextProvider","props","useState","setId","setName","setCategory","comment","setComment","expireDate","setExpireDate","expireInDays","setExpireInDays","setNewItem","_id","_name","_category","_expireDate","_comment","Provider","value","resetNewItem","children","strDateCompare","diff","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","db","firestore","AuthContext","AuthContextProvider","history","useHistory","useContext","UserDataContext","userData","setUserData","setCurrentUser","onAuthStateChanged","user","collection","where","uid","get","then","snapshot","docs","ref","map","doc","data","push","catch","error","alert","useEffect","timer","setTimeout","clearTimeout","login","email","password","signInWithEmailAndPassword","UserDataContextProvider","currentUser","addItem","_item","add","console","log","concat","deleteItem","delete","filter","item","editItem","update","DialogContext","DeleteDialog","open","setOpen","handleDelete","handleClose","Dialog","onClose","DialogTitle","DialogContent","DialogActions","onClick","dialogCancelBtn","dialogConfirmBtn","ItemTag","clockColor","ItemContext","focus","setFocus","find","isExpired","borderColor","itemTag","boxShadow","itemTagName","itemTagTime","itemTagComment","itemTagMore","marginLeft","Toolbar","ToolbarContext","search","setSearch","sort","setSort","toolbar","placeholder","onChange","e","target","toolbarToggle","type","toolbarCheckbox","htmlFor","display","alignItems","fontSize","position","right","marginRight","Waiting","Home","includes","pinyin","removeTone","removeSpace","item1","item2","Account","min2ms","timeZoneOffset","getTimezoneOffset","NewPage","toggleTime","setToggleTime","cssHome","headerBackBtn","form","formInput","justifyContent","toggleDiv","textAlign","strDate","days","rows","formSubmit","Button","variant","newItem","uuidv4","Login","setEmail","setPassword","App","basename","process","path","to","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.176f7f39.chunk.js","sourcesContent":["import css from \"../styles/Home.module.css\";\r\n\r\nfunction Header ({category}) {\r\n\r\n  return (\r\n    <div className={css.header} style={{\r\n      color: category.textColor,\r\n      backgroundColor: category.color\r\n    }}>\r\n      {category.name}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;","// parse date object to yyyy-mm-dd\r\n// @param Date: date\r\nfunction dateParser(date) {\r\n  \r\n  let month = \"\" + (date.getMonth() + 1);\r\n  let day = \"\" + date.getDate();\r\n  const year = \"\" + date.getFullYear();\r\n\r\n  if (month.length < 2)\r\n    month = \"0\" + month;\r\n  if (day.length < 2)\r\n    day = \"0\" + day;\r\n\r\n  return [year, month, day].join(\"-\");\r\n}\r\n\r\nexport default dateParser;","export const categories = [\r\n  {\r\n    name: \"水果\",\r\n    id: \"fruits\",  // used for database\r\n    color: \"#42a5f5\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"蔬菜\",\r\n    id: \"vegetables\",\r\n    color: \"#8bc34a\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"肉类\",\r\n    id: \"meat\",\r\n    color: \"#FF5722\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"干货\",\r\n    id: \"dry-foods\",\r\n    color: \"#FEA82F\",\r\n    textColor: \"#f5f5f5\",\r\n  },\r\n  {\r\n    name: \"其他\",\r\n    id: \"others\",\r\n    color: \"#cfd8dc\",\r\n    textColor: \"#757575\",\r\n  },\r\n];","// subtract d1 - d2 and return day difference\r\n\r\nconst day2ms = 8.64*10**7;\r\n\r\nfunction dateSubtract(date1, date2) {\r\n\r\n}\r\n\r\nfunction strDateSubtract(strDate1, strDate2) {\r\n  return Math.floor((\r\n    new Date(strDate1).getTime()\r\n    - new Date(strDate2).getTime()\r\n  ) / day2ms);\r\n}\r\n\r\nexport { dateSubtract, strDateSubtract };","import { createContext, useState } from \"react\";\r\nimport dateParser from \"../utils/dateParser\";\r\nimport { strDateSubtract } from \"../utils/dateSubtract\";\r\n\r\nexport const NewItemContext = createContext();\r\n\r\nfunction NewItemContextProvider(props) {\r\n\r\n  const [id, setId] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [category, setCategory] = useState(\"\");\r\n  const [comment, setComment] = useState(\"\");\r\n  const [expireDate, setExpireDate] = useState(dateParser(new Date()));\r\n  const [expireInDays, setExpireInDays] = useState(0);\r\n\r\n  const setNewItem = ({_id, _name, _category, _expireDate, _comment}) => {\r\n    setId(_id); setName(_name); setCategory(_category); setComment(_comment);\r\n    setExpireDate(_expireDate); \r\n    setExpireInDays( strDateSubtract(_expireDate, dateParser(new Date())) );\r\n  }\r\n\r\n  const resetNewItem = () => {\r\n    setNewItem({\r\n      _id: \"\", _name: \"\", _category: \"\", _expireDate: dateParser(new Date()), _comment: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <NewItemContext.Provider value={{\r\n      id, setId,\r\n      name, setName, \r\n      category, setCategory, \r\n      comment, setComment,\r\n      expireDate, setExpireDate, \r\n      expireInDays, setExpireInDays,\r\n      setNewItem, resetNewItem,\r\n    }}>\r\n      {props.children}\r\n    </NewItemContext.Provider>\r\n  );\r\n}\r\n\r\nexport default NewItemContextProvider;","// return -1 if d1 < d2; 0 if d1 = d2; 1 if d1 > d2\r\n\r\nfunction strDateCompare(strDate1, strDate2) {\r\n  const diff = new Date(strDate1).getTime() - new Date(strDate2).getTime();\r\n  if (diff < 0) {\r\n    return -1;\r\n  } else if (diff > 0) {\r\n    return 1;\r\n  } else {\r\n    return 0;\r\n  }\r\n}\r\n\r\nexport { strDateCompare };","import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport css from \"../styles/Login.module.css\";\r\nimport firebase from \"firebase\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/database\";\r\nimport { UserDataContext } from \"../utils/data\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\n// initialize firebase\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyBB3M2bTBga_ZlUO_Y266AIZwUS5emMmCM\",\r\n  authDomain: \"food-reminder-e1c8b.firebaseapp.com\",\r\n  projectId: \"food-reminder-e1c8b\",\r\n  storageBucket: \"food-reminder-e1c8b.appspot.com\",\r\n  messagingSenderId: \"209486423857\",\r\n  appId: \"1:209486423857:web:ae03d94e05722b23a37210\"\r\n});\r\nexport const auth = firebase.auth();\r\nexport const db = firebase.firestore();\r\n\r\nexport const AuthContext = createContext();\r\n\r\nfunction AuthContextProvider(props) {\r\n\r\n  // context\r\n  const history = useHistory();\r\n  const { userData, setUserData, setCurrentUser } = useContext(UserDataContext);\r\n\r\n  // login\r\n  const login = (email, password) => {\r\n    auth.signInWithEmailAndPassword(email, password)\r\n      // .then(() => {\r\n      //   history.push('/home');  // caveat: only redirect once!\r\n      // })\r\n      .catch(error => {\r\n        alert(\"Login Error: \" + error);\r\n      });\r\n  };\r\n\r\n  // sign up\r\n\r\n\r\n  // user status listener\r\n  // caveat: onAuthStateChanged refreshes and triggers all the time\r\n  const unsubscribe = auth.onAuthStateChanged(user => {\r\n    if (user && !userData) {\r\n      // fetch data\r\n      db.collection('users')\r\n        .where('userId', '==', user.uid)\r\n        .get()\r\n        .then(snapshot => {\r\n          snapshot.docs[0].ref.collection('items')\r\n            .get()\r\n            .then(snapshot => {\r\n              setCurrentUser(user.uid);\r\n              setUserData(snapshot.docs.map(doc => doc.data()));\r\n              history.push('./home');\r\n            });\r\n        })\r\n        .catch(error => {\r\n          alert(\"Database Error: \" + error);\r\n        });\r\n    } else if (!user && userData) {\r\n      setUserData(null);  // clear data when logged out\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    let timer = setTimeout(() => {\r\n      if (!userData) {\r\n        history.push('./login');\r\n      }\r\n    }, 500);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [userData]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{\r\n      login,\r\n    }}>\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default AuthContextProvider;","import { createContext, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { db } from \"../contexts/AuthContext\";\r\n\r\nexport const data = [\r\n  {\r\n    id: \"item-001\",\r\n    name: \"猪肉\",\r\n    category: \"meat\",\r\n    expireDate: \"2021-08-19\",\r\n    comment: \"冰箱冷冻室\",\r\n  },\r\n  {\r\n    id: \"item-002\",\r\n    name: \"鸡翅\",\r\n    category: \"meat\",\r\n    expireDate: \"2021-08-06\",\r\n    comment: \"今早吃掉\",\r\n  },\r\n  {\r\n    id: \"item-003\",\r\n    name: \"西兰花\",\r\n    category: \"vegetables\",\r\n    expireDate: \"2021-08-10\",\r\n    comment: \"冷藏第三层\",\r\n  }\r\n];\r\n\r\nexport const UserDataContext = createContext();\r\n\r\nfunction UserDataContextProvider(props) {\r\n\r\n  const [userData, setUserData] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState(\"\");\r\n  const { history } = useHistory();\r\n\r\n  // add new item\r\n  const addItem = (_item) => {\r\n    db.collection('users')\r\n      .where('userId', '==', currentUser)\r\n      .get()\r\n      .then(snapshot => {\r\n        snapshot.docs[0].ref.collection('items')\r\n          .add(_item)\r\n          .then(() => {\r\n            console.log(\"successfully ADD new item\");\r\n            setUserData(userData.concat([_item]));\r\n          });\r\n      });\r\n  };\r\n\r\n  // delete existing item\r\n  const deleteItem = (_item) => {\r\n    // get user\r\n    db.collection('users')\r\n      .where('userId', '==', currentUser)\r\n      .get()\r\n      .then(snapshot => {\r\n        // get item\r\n        snapshot.docs[0].ref.collection('items')\r\n          .where('id', '==', _item.id)\r\n          .get()\r\n          .then(snapshot => {\r\n            // delete item\r\n            snapshot.docs[0].ref\r\n              .delete()\r\n              .then(() => {\r\n                console.log(\"successfully DELETE new item\");\r\n                setUserData(userData.filter(item => item.id !== _item.id));\r\n              });\r\n          });\r\n      });\r\n  };\r\n\r\n  // edit existing item\r\n  const editItem = (_item) => {\r\n    // get user\r\n    db.collection('users')\r\n      .where('userId', '==', currentUser)\r\n      .get()\r\n      .then(snapshot => {\r\n        // get item\r\n        snapshot.docs[0].ref.collection('items')\r\n          .where('id', '==', _item.id)\r\n          .get()\r\n          .then(snapshot => {\r\n            // update item\r\n            snapshot.docs[0].ref\r\n              .update({ ..._item })\r\n              .then(() => {\r\n                console.log(\"successfully EDIT new item\");\r\n                setUserData(userData.map(item => item.id !== _item.id ? item : _item));\r\n              });\r\n          });\r\n      });\r\n  };\r\n\r\n  return (\r\n    <UserDataContext.Provider value={{\r\n      currentUser, setCurrentUser,\r\n      userData, setUserData,\r\n      addItem, deleteItem, editItem,\r\n    }} >\r\n      {props.children}\r\n    </UserDataContext.Provider>\r\n  );\r\n}\r\n\r\nexport default UserDataContextProvider;","import PropTypes from 'prop-types';\r\nimport { createContext, useContext, useState } from 'react';\r\nimport { ItemContext } from '../pages/Home.js';\r\nimport css from '../styles/Home.module.css';\r\nimport dateParser from '../utils/dateParser.js';\r\nimport ScheduleIcon from '@material-ui/icons/Schedule';\r\nimport { categories } from \"../utils/categoryData\";\r\nimport { strDateSubtract } from \"../utils/dateSubtract\";\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport { Dialog, DialogTitle, DialogContent, DialogActions } from '@material-ui/core';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { NewItemContext } from '../contexts/NewItemContext.js';\r\nimport { strDateCompare } from '../utils/dateCompare.js';\r\nimport { UserDataContext } from '../utils/data.js';\r\n\r\nconst DialogContext = createContext();\r\n\r\nfunction ItemTag({ item }) {\r\n\r\n  const history = useHistory();\r\n\r\n  // context\r\n  const { focus, setFocus } = useContext(ItemContext);\r\n  const handleClick = () => setFocus(item.id);\r\n\r\n  // edit item\r\n  const { setNewItem } = useContext(NewItemContext);\r\n\r\n  // delete dialog\r\n  const [open, setOpen] = useState(false);\r\n\r\n  // delete function\r\n  const { deleteItem } = useContext(UserDataContext);\r\n  const handleDelete = () => {\r\n    deleteItem(item);\r\n    setOpen(false);   // close dialog\r\n  };\r\n\r\n  // attr\r\n  const category = categories.find(category => category.id === item.category);\r\n  const diff = strDateSubtract(item.expireDate, dateParser(new Date()));\r\n  const isExpired = diff < 0;\r\n\r\n  let clockColor;\r\n  if (isExpired || diff <= 3) {\r\n    clockColor = \"#c23b0a\"; // red\r\n  } else if (diff <= 7) {\r\n    clockColor = \"#cf9911\"; // orange\r\n  } else {\r\n    clockColor = \"#2b9611\"; // green\r\n  }\r\n\r\n  const borderColor = category.color;\r\n\r\n  // module\r\n  return (\r\n    <DialogContext.Provider value={{ open, setOpen, handleDelete }} >\r\n      <div className={css.itemTag} onClick={handleClick} style={{\r\n        borderColor: borderColor, \r\n        boxShadow: isExpired ? \"3px 3px 8px #c23b0a\" : \"3px 3px 8px #cfcfcf\",\r\n      }} >\r\n        <div className={css.itemTagName}>\r\n          {item.name}\r\n        </div>\r\n        <div className={css.itemTagTime} style={{color: isExpired? \"red\" : \"inherit\"}} >\r\n          <ScheduleIcon style={{\r\n            color: clockColor,\r\n          }} />\r\n          {isExpired ?\r\n            \"已经过期\" :\r\n            (diff <= 7 ?\r\n              `${diff} 天后过期` :\r\n              `${item.expireDate} 过期`)\r\n          }\r\n        </div>\r\n        {item.id === focus && item.comment && item.comment !== \"\" &&\r\n          <div className={css.itemTagComment}> {item.comment} </div>\r\n        }\r\n        {item.id === focus &&\r\n          <div className={css.itemTagMore}>\r\n            <InfoOutlinedIcon style={{ color: \"#43a047\" }}\r\n              onClick={() => {\r\n                setNewItem({\r\n                  _id: item.id, _name: item.name, _category: item.category,\r\n                  _expireDate: item.expireDate, _comment: item.comment,\r\n                });\r\n                history.push('./new-item');\r\n              }} />\r\n            <CancelIcon color=\"secondary\" style={{ marginLeft: \"5px\" }}\r\n              onClick={() => { setOpen(true) }} />\r\n          </div>\r\n        }\r\n        <DeleteDialog />\r\n      </div>\r\n    </DialogContext.Provider>\r\n  );\r\n}\r\n\r\nfunction DeleteDialog() {\r\n  const { open, setOpen, handleDelete } = useContext(DialogContext);\r\n  const handleClose = () => { setOpen(false) };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose} >\r\n      <DialogTitle>确认删除？</DialogTitle>\r\n      <DialogContent>是否要删除这项物品？一旦确认，该物品将被永久删除。</DialogContent>\r\n      <DialogActions>\r\n        <div onClick={handleClose} className={css.dialogCancelBtn} >取消</div>\r\n        <div onClick={handleDelete} className={css.dialogConfirmBtn} >确认</div>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nItemTag.propTypes = {\r\n  item: PropTypes.shape({\r\n    id: PropTypes.string,\r\n    name: PropTypes.string,\r\n    category: PropTypes.string,\r\n    expireDate: PropTypes.string,\r\n    comment: PropTypes.string\r\n  })\r\n};\r\n\r\nexport default ItemTag;","import css from \"../styles/Home.module.css\";\r\nimport CachedOutlinedIcon from '@material-ui/icons/CachedOutlined';\r\nimport AddBoxOutlinedIcon from '@material-ui/icons/AddBoxOutlined';\r\nimport { useContext } from \"react\";\r\nimport { ToolbarContext } from \"../pages/Home\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { NewItemContext } from \"../contexts/NewItemContext\";\r\n\r\nfunction Toolbar() {\r\n\r\n  // context\r\n  const history = useHistory();\r\n  const { search, setSearch, sort, setSort } = useContext(ToolbarContext);\r\n  const { resetNewItem } = useContext(NewItemContext);\r\n\r\n  // events\r\n  const handleSearchChange = (e) => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className={css.toolbar}>\r\n      <input placeholder={\"搜索\"} value={search} onChange={handleSearchChange} />\r\n\r\n      <div className={css.toolbarToggle}>\r\n        <input type=\"checkbox\" id={css.toolbarCheckbox} value={sort} onChange={() => { setSort(!sort) }} />\r\n        <label htmlFor={css.toolbarCheckbox} >紧凑模式</label>\r\n      </div>\r\n\r\n      <div onClick={() => { resetNewItem(); history.push('./new-item') }} style={{\r\n        display: \"flex\", alignItems: \"center\", fontSize: \"0.9em\", position: \"absolute\", right: \"12px\"\r\n      }}>\r\n        <AddBoxOutlinedIcon style={{ marginRight: \"3px\" }} /> 添加项目\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Toolbar;","function Waiting() {\r\n  return (\r\n    <div>\r\n      正在连接服务器，请稍等……\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Waiting;","import { createContext, useContext, useState } from \"react\";\r\nimport Header from \"../components/Header\";\r\nimport ItemTag from \"../components/ItemTag\";\r\nimport pinyin from \"chinese-to-pinyin\";\r\nimport { UserDataContext } from \"../utils/data\";\r\nimport { categories } from \"../utils/categoryData\";\r\nimport Toolbar from \"../components/Toolbar\";\r\nimport { strDateCompare } from \"../utils/dateCompare\";\r\nimport Waiting from \"../components/Waiting\";\r\n\r\nexport const ToolbarContext = createContext();\r\nexport const ItemContext = createContext();\r\n\r\nfunction Home() {\r\n\r\n  // data context\r\n  const { userData } = useContext(UserDataContext);\r\n\r\n  // item context\r\n  const [focus, setFocus] = useState(\"\");\r\n\r\n  // toolbar context\r\n  const [search, setSearch] = useState(\"\");\r\n  const [sort, setSort] = useState(false); // true: sort by time; false: sort by category\r\n\r\n  // clear focus upon state change\r\n\r\n  // loading page\r\n  if (!userData) {\r\n    return <Waiting />;\r\n  }\r\n\r\n  // module\r\n  return (\r\n    <ToolbarContext.Provider value={{\r\n      search, setSearch,\r\n      sort, setSort,\r\n    }}>\r\n      <ItemContext.Provider value={{\r\n        focus, setFocus,\r\n      }}>\r\n        <Toolbar />\r\n\r\n        {sort ?\r\n          <div>\r\n            {\r\n              userData.filter(item => item.name.includes(search)\r\n                || pinyin(item.name, { removeTone: true, removeSpace: false }).includes(search))\r\n                .sort((item1, item2) => strDateCompare(item1.expireDate, item2.expireDate))\r\n                .map(item => <ItemTag item={item} key={item.id} />)\r\n            }\r\n          </div> :\r\n          <div>\r\n            {\r\n              categories.map(category => (\r\n                <div key={category.id}>\r\n                  <Header category={category} />\r\n                  {\r\n                    userData.filter(item => item.category===category.id)\r\n                      .filter(item => item.name.includes(search)\r\n                      || pinyin(item.name, { removeTone: true, removeSpace: false }).includes(search))\r\n                      .sort((item1, item2) => strDateCompare(item1.expireDate, item2.expireDate))\r\n                      .map(item => <ItemTag item={item} key={item.id} />)\r\n                  }\r\n                </div>\r\n              ))\r\n            }\r\n          </div>\r\n        }\r\n      </ItemContext.Provider>\r\n    </ToolbarContext.Provider>\r\n  );\r\n}\r\n\r\n\r\nexport default Home;","\r\n\r\nfunction Account () {\r\n\r\n  return (\r\n    <div>\r\n      Account\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Account;","// add n days to a certain date\r\n\r\nimport dateParser from \"./dateParser\";\r\n\r\nconst day2ms = 8.64*10**7;\r\nconst min2ms = 6*10**4;\r\nconst timeZoneOffset = new Date().getTimezoneOffset(); \r\n\r\n// @param date: Date() object\r\n// return: Date() object\r\nfunction dateAdd(date, days) {\r\n\r\n}\r\n\r\n// @param strDate: string \"yyyy-mm-dd\"\r\n// return: string \"yyyy-mm-dd\"\r\nfunction strDateAdd(strDate, days) {\r\n  return dateParser(\r\n    new Date(\r\n      new Date(strDate).getTime() // initial date\r\n      + days * day2ms             // day gap\r\n      + timeZoneOffset * min2ms   // time zone correction\r\n    )\r\n  );\r\n}\r\n\r\nexport { dateAdd, strDateAdd }","import { categories } from \"../utils/categoryData\";\r\nimport cssHome from \"../styles/Home.module.css\";\r\nimport css from \"../styles/NewPage.module.css\"\r\nimport ArrowBackOutlinedIcon from '@material-ui/icons/ArrowBackOutlined';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Formik, Form, Field } from \"formik\";\r\nimport { useContext, useState } from \"react\";\r\nimport dateParser from \"../utils/dateParser\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { strDateAdd } from \"../utils/dateAdd\";\r\nimport { strDateSubtract } from \"../utils/dateSubtract\";\r\nimport { NewItemContext } from \"../contexts/NewItemContext\";\r\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport { UserDataContext } from \"../utils/data\";\r\nimport { strDateCompare } from \"../utils/dateCompare\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport Waiting from \"../components/Waiting\";\r\n\r\nfunction NewPage() {\r\n\r\n  const history = useHistory();\r\n  const { userData } = useContext(UserDataContext);\r\n\r\n  // save item / edit item\r\n  const { addItem, editItem } = useContext(UserDataContext);\r\n\r\n  // form context\r\n  const {\r\n    id, setId, name, setName, category, setCategory, comment, setComment,\r\n    expireDate, setExpireDate, expireInDays, setExpireInDays,\r\n    resetNewItem,\r\n  } = useContext(NewItemContext);\r\n\r\n  const [toggleTime, setToggleTime] = useState(false); // true: time picker; false: xxx days from now\r\n\r\n  // submission: save or edit item\r\n  const handleSubmit = () => {\r\n    const newItem = {\r\n      id: id,\r\n      name: name,\r\n      category: category,\r\n      expireDate: expireDate,\r\n      comment: comment,\r\n    };\r\n\r\n    // validation schema\r\n    let error = [];\r\n    if (name === \"\") {\r\n      error.push(\"请输入名字\");\r\n    }\r\n    if (category === \"\") {\r\n      error.push(\"请选择种类\");\r\n    }\r\n    if (strDateCompare(expireDate, dateParser(new Date())) == -1 ) {\r\n      error.push(\"过期日期不能为过去的日期\");\r\n    }\r\n    if (error.length != 0) {\r\n      alert(error.join(\"\\n\"));  // error message\r\n      return null;\r\n    }\r\n\r\n    // save to database\r\n    if (id === \"\") {\r\n      // save item\r\n      addItem({\r\n        ...newItem,\r\n        id: uuidv4(),\r\n      });\r\n    } else {\r\n      // edit item\r\n      editItem(newItem);\r\n    }\r\n\r\n    // reset and redirect\r\n    resetNewItem();\r\n    history.push(\"./home\");  // moved to addItm, editItem functions\r\n  };\r\n\r\n  // loading page\r\n  if (!userData) {\r\n    return <Waiting />\r\n  }\r\n\r\n  // DOM\r\n  return (\r\n    <div>\r\n      <div className={cssHome.toolbar}>\r\n        <div className={css.headerBackBtn} onClick={() => { history.push('./home') }} >\r\n          <ArrowBackOutlinedIcon /> 返回\r\n        </div>\r\n      </div>\r\n\r\n      <form className={css.form}>\r\n        <div>\r\n          <label htmlFor={css.name}>名称</label> <br />\r\n          <input id={css.name} className={css.formInput}\r\n            value={name} onChange={(e) => { setName(e.target.value) }}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor={css.category} >分类</label> <br />\r\n          <select id={css.category}\r\n            value={category} onChange={(e) => { setCategory(e.target.value) }}\r\n          >\r\n            <option value=\"\">----- 请选择分类 -----</option>\r\n            {categories.map(category =>\r\n              <option value={category.id} key={category.id}>\r\n                {category.name}\r\n              </option>\r\n            )}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n            <label>保质期</label>\r\n            <div id={css.toggleDiv}>\r\n              <input id=\"toggle\" type=\"checkbox\"\r\n                value={toggleTime} onChange={() => { setToggleTime(!toggleTime) }}\r\n              />\r\n              <label htmlFor=\"toggle\" >选取日期</label>\r\n            </div>\r\n          </div>\r\n          {toggleTime ?\r\n            <input id={css.expireDate} type=\"date\" value={expireDate}\r\n              onChange={(e) => {\r\n                setExpireDate(e.target.value);\r\n                setExpireInDays(strDateSubtract(\r\n                  e.target.value, dateParser(new Date())\r\n                ));\r\n              }}\r\n            /> :\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <input id={css.expireInDays} type=\"number\"\r\n                value={expireInDays} onChange={(e) => {\r\n                  setExpireInDays(e.target.value);\r\n                  setExpireDate(strDateAdd(\r\n                    dateParser(new Date()), e.target.value\r\n                  ))\r\n                }}\r\n              />\r\n              <label htmlFor={css.expireInDays}> 天后过期</label>\r\n            </div>\r\n          }\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor={css.comment} >备注</label> <br />\r\n          <textarea id={css.comment} rows={3}\r\n            value={comment} onChange={(e) => { setComment(e.target.value) }}\r\n          ></textarea>\r\n        </div>\r\n\r\n        <div className={css.formSubmit}>\r\n          <Button style={{ fontSize: \"1rem\", color: \"red\" }}\r\n            onClick={ resetNewItem }\r\n          ><DeleteForeverIcon />清除</Button>\r\n          <Button variant=\"contained\" style={{\r\n            fontSize: \"1rem\",\r\n            color: \"#F0F0F0\", backgroundColor: \"#B05B3B\",\r\n          }}\r\n            onClick={handleSubmit}\r\n          ><SaveIcon style={{marginRight: \"0.15em\"}} />保存</Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewPage;","import { useContext, useState } from \"react\";\r\nimport css from \"../styles/Login.module.css\";\r\nimport { AuthContext } from \"../contexts/AuthContext\";\r\n\r\n\r\nfunction Login() {\r\n\r\n  // context\r\n  const { login } = useContext(AuthContext);\r\n\r\n  // form states\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  return (\r\n    <div className={css.login}>\r\n      <div>\r\n        <h3>登录</h3>\r\n        <div>\r\n          邮箱：\r\n          <input value={email} onChange={e => { setEmail(e.target.value) }} />\r\n        </div>\r\n        <div>\r\n          密码：\r\n          <input type=\"password\" value={password} onChange={e => { setPassword(e.target.value) }} />\r\n        </div>\r\n        <button onClick={() => { login(email, password) }}>\r\n          确定\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\n// pages\nimport Home from './pages/Home';\nimport Account from './pages/Account';\nimport NewPage from './pages/NewItem';\nimport NewItemContextProvider from './contexts/NewItemContext';\nimport UserDataContextProvider, { UserDataContext } from './utils/data';\nimport Login from './pages/Login';\nimport { useContext } from 'react';\nimport AuthContextProvider from './contexts/AuthContext';\n\nfunction App() {\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <UserDataContextProvider>\n        <AuthContextProvider>\n          <NewItemContextProvider>\n            <Switch>\n              <Route path='/home'>\n                <Home />\n              </Route>\n\n              <Route path='/new-item'>\n                <NewPage />\n              </Route>\n\n              <Route path='/account'>\n                <Account />\n              </Route>\n\n              <Route path='/login'>\n                <Login />\n              </Route>\n\n              <Route path='/'>\n                <Redirect to='/login' />\n              </Route>\n            </Switch>\n          </NewItemContextProvider>\n        </AuthContextProvider>\n      </UserDataContextProvider>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport UserDataContextProvider from './utils/data';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemTag\":\"Home_itemTag__2tM5m\",\"itemTagTime\":\"Home_itemTagTime__3MI3S\",\"itemTagComment\":\"Home_itemTagComment__1haJH\",\"itemTagMore\":\"Home_itemTagMore__ovSbv\",\"toolbar\":\"Home_toolbar__3AGqh\",\"toolbarToggle\":\"Home_toolbarToggle__2oSg7\",\"toolbarCheckbox\":\"Home_toolbarCheckbox__3HxwP\",\"header\":\"Home_header__31p1I\",\"dialogCancelBtn\":\"Home_dialogCancelBtn__2OS-A\",\"dialogConfirmBtn\":\"Home_dialogConfirmBtn__3bM_B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerBackBtn\":\"NewPage_headerBackBtn__1Gbkn\",\"form\":\"NewPage_form__1OlwF\",\"toggleDiv\":\"NewPage_toggleDiv__2rY4A\",\"formSubmit\":\"NewPage_formSubmit__14eAv\",\"name\":\"NewPage_name__3yGes\",\"category\":\"NewPage_category__3YlE6\",\"expireInDays\":\"NewPage_expireInDays__32Y4v\",\"expireDate\":\"NewPage_expireDate__2knjQ\",\"comment\":\"NewPage_comment__37k5I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__3menE\"};"],"sourceRoot":""}